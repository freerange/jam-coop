<%= render('shared/page_header', text: 'Artists') %>

<div class="pt-4 grid grid-cols-3 gap-4">
  <% @artists.listed.order(:name).each do |artist| %>
  <div>
    <%= link_to(artist_path(artist)) do %>
    <div class="border border-slate-200 w-full aspect-w-1 aspect-h-1">
      <% if artist.profile_picture.representable? %>
      <%= image_tag artist.profile_picture.representation(resize_to_fill: [300, 300]), class: 'w-full' %>
      <% end %>
    </div>
    <p class='text-sm text-slate-500'><%= artist.name %></p>
    <% end %>
  </div>
  <% end %>

  <% if Current.user %>
  <% @artists.unlisted.order(:name).each do |artist| %>
  <div>
    <%= link_to(artist_path(artist)) do %>
    <div class="border border-slate-200 w-full aspect-w-1 aspect-h-1">
      <% if artist.profile_picture.representable? %>
      <%= image_tag artist.profile_picture.representation(resize_to_fill: [300, 300]), class: 'w-full' %>
      <% end %>
    </div>
    <p class='text-sm text-slate-500'><%= artist.name %> (unlisted)</p>
    <% end %>
  </div>
  <% end %>
  <% end %>

  <% content_for :admin do %>
    <% if policy(Artist).new? %>
      <%= text_link_to "New artist", new_artist_path %>
    <% end %>
  <% end %>
</div>
