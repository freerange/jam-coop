<div class="flex flex-row gap-2">
  <div class="">
    <%= image_tag @album.cover.representation(resize_to_limit: [400, 400]), class: 'w-full border border-slate-200' %>
  </div>
  <div class="">
    <div class="mb-3">
      <h1 class="text-lg font-medium leading-tight"><%= @album.title %></h1>
      <h2 class="text-sm text-slate-600"><%= @album.artist.name %></h2>
    </div>

    <% if @album.preview %>
    <audio controls class='w-full'>
      <source src="<%= url_for(@album.preview.file) %>">
    </audio>
    <% end %>
  </div>
</div>

<h3 class="text-lg font-medium my-3">Tracklist</h3>
<% @album.tracks.each_with_index do |track, index| %>
<div class="flex flex-row justify-between mb-2">
  <div>
    <%= index + 1 %>. <%= track.title %>
  </div>
  <div>
    <%= text_link_to 'Edit', edit_artist_album_track_url(track.artist, track.album, track) %>
    <%= text_link_to 'Delete', artist_album_track_path(track.artist, track.album, track), data: {
                    turbo_method: :delete,
                    turbo_confirm: 'Are you sure?'
        } %>
    <%= text_link_to 'Up', move_higher_artist_album_track_path(track.artist, track.album, track), data: {
                    turbo_method: :post } %>
    <%= text_link_to 'Down', move_lower_artist_album_track_path(track.artist, track.album, track), data: {
                    turbo_method: :post } %>
  </div>
</div>
<% end %>

<%= text_link_to 'Add track', new_artist_album_track_path(@album.artist, @album) %>
